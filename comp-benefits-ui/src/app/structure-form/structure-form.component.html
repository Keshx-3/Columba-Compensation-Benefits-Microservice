<div class="form-container">
  <h2>{{ isEditMode ? 'Edit' : 'Create' }} Salary Structure</h2>

  <form [formGroup]="structureForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="name">Structure Name</label>
      <input id="name" type="text" formControlName="name" class="form-control" placeholder="e.g. Document Controller - L1">
    </div>

    <div class="form-group">
      <label for="country">Country</label>
      <select id="country" formControlName="country" class="form-control">
        <option *ngFor="let country of countries" [value]="country">{{ country }}</option>
      </select>
    </div>

    <h3>Components</h3>
    <div formArrayName="components">
      <div *ngFor="let comp of components.controls; let i=index" [formGroupName]="i" class="component-row">
        <div class="form-group">
          <input type="text" formControlName="name" placeholder="Component Name" class="form-control">
        </div>
        <div class="form-group">
          <select formControlName="type" class="form-control">
            <option *ngFor="let type of componentTypes" [value]="type">{{ type | titlecase }}</option>
          </select>
        </div>
        <div class="form-group">
          <select formControlName="rule_type" class="form-control">
            <option *ngFor="let rule of ruleTypes" [value]="rule">{{ rule | titlecase }}</option>
          </select>
        </div>
        <button type="button" (click)="removeComponent(i)" class="btn-danger" *ngIf="components.length > 1">Remove</button>
      </div>
    </div>

    <button type="button" (click)="addComponent()" class="btn-secondary">+ Add Component</button>

    <div class="form-actions">
      <button type="submit" [disabled]="structureForm.invalid" class="btn-primary">Save Structure</button>
      <a routerLink="/structures" class="btn-link">Cancel</a>
    </div>
  </form>
</div>